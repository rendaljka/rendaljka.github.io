<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/rendaljka.github.io"},"articleSection":"articles","name":"Setup Emulated Android Device (Remote Host)","headline":"Setup Emulated Android Device (Remote Host)","description":"What is this about? This article is for anyone trying to setup Android Emulated Device for remote debugging.\nExample: you have Android Device Manager on your host and a Kali Virutal Machine.\nI had also struggled with it myself and had to glue different pieces available online together.\nIf you have any questions or feedback you can reach me on one of my links.\nPrerequisites  Android Studio installed OR Android SDK Manager Install Android Device Manager ADB installed on your client machine (i.","inLanguage":"en-US","author":"rendaljka","creator":"rendaljka","publisher":"rendaljka","accountablePerson":"rendaljka","copyrightHolder":"rendaljka","copyrightYear":"2022","datePublished":"2022-04-08 18:48:01 \u002b0200 \u002b0200","dateModified":"2022-04-08 18:48:01 \u002b0200 \u002b0200","url":"https:\/\/rendaljka.github.io\/articles\/setup-emulated-android-device\/","wordCount":"337","keywords":[]}</script><title>Setup Emulated Android Device (Remote Host) // rendaljka's cave</title><link rel="shortcut icon" href=https://rendaljka.github.io/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.96.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="rendaljka"><meta name=description content><link rel=stylesheet href=https://rendaljka.github.io/css/main.min.baac7d3c082fe90e427c5fc390960ea736e0961df8da5347b29799f9b6bf408f.css><meta name=google-site-verification content="TW8WGCV6Rl6etxJO6jbE7w66k5dLkgNippUKVA5xIok"><script async src="https://www.googletagmanager.com/gtag/js?id=G-RCNYWGB9DM"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RCNYWGB9DM",{anonymize_ip:!1})}</script></head><body><header class=app-header><a href=https://rendaljka.github.io><img class=app-header-avatar src=https://rendaljka.github.io/images/avatar.png alt=rendaljka></a><h1>rendaljka's cave</h1><nav class=app-header-menu><a class=app-header-menu-item href=https://rendaljka.github.io/>Home</a>
><
<a class=app-header-menu-item href=https://rendaljka.github.io/articles/>Articles</a>
><
<a class=app-header-menu-item href=https://rendaljka.github.io/writeups/>Writeups</a>
><
<a class=app-header-menu-item href=https://rendaljka.github.io/aboutme>About Me</a></nav><p>A mischievous ðŸ˜ˆ citizen of the Universe ðŸ‘½ ðŸ‘¾ ðŸ˜¼</p><div class=app-header-social><a href=https://github.com/rendaljka target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://twitter.com/rendaljka target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>Twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Setup Emulated Android Device (Remote Host)</h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Apr 8, 2022</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 min read</div></div></header><div class=post-content><h2 id=what-is-this-about>What is this about?</h2><p>This article is for anyone trying to setup Android Emulated Device for remote debugging.</p><p><em>Example: you have Android Device Manager on your host and a Kali Virutal Machine.</em></p><p>I had also struggled with it myself and had to glue different pieces available online together.</p><p>If you have any questions or feedback you can reach me on one of my links.</p><h2 id=prerequisites>Prerequisites</h2><ul><li>Android Studio installed OR Android SDK Manager</li><li>Install Android Device Manager</li><li>ADB installed on your client machine (i.e the machine from which you want to debug)</li></ul><h2 id=setup-android-emulated-device-for-debugging>Setup Android Emulated Device for Debugging</h2><p>Just launching the Android Emulated Device <strong>won&rsquo;t allow us to connect to it from the remote machine</strong>, as by default it is only exposed to the loopback interface - <code>127.0.0.1</code>.</p><p>But there is more, when we want to communicate with a device via CLI, we are actually communicating with an API server that runs between the client and the emulated device.</p><p><img src=https://rendaljka.github.io/images/p1/adbformat.png alt="ADB Format"></p><p>However at the time of writing there is no option (or it doesn&rsquo;t seem to work) that would set the server to listen on something different than <code>localhost</code>.</p><p>The only way to force the server to listen on another interface is with the <code>-a nodaemon</code> option which will bind to <code>0.0.0.0</code></p><p>Below is the final commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>
</span></span><span style=display:flex><span>adb.exe -a nodaemon server <span style=color:#75715e># So it listens on all interface instead of 127.0.0.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>emulator -avd <span style=color:#e6db74>&#34;virtual_device_name&#34;</span> -writable-system <span style=color:#75715e># to allow cert import (like burp cert)</span>
</span></span></code></pre></div><hr><p><strong>NOTE:</strong></p><p>It is important that you first launch the server, as if you launch the device first it will by default reach out to the server and if unable will launch one on it&rsquo;s own. Which will still listen on <code>localhost</code></p><hr><h2 id=connect-to-the-device-from-the-remote-host>Connect to the device from the remote host</h2><ul><li>Ensure that the remote host has connectivity to the machine where the emulated device runs.</li><li>Export the server connection information</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>
</span></span><span style=display:flex><span>export ADB_SERVER_SOCKET<span style=color:#f92672>=</span>tcp:&lt;IP_OF_EMULATE_DEVICE_MACHINE&gt;:&lt;PORT&gt; <span style=color:#75715e># usually 5037</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>adb devices -l
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>adb root <span style=color:#75715e># logs you in as root on the emulated device</span>
</span></span></code></pre></div><p>And that&rsquo;s it !</p><h2 id=references>References</h2><p><a href=https://android.stackexchange.com/questions/52911/adb-start-server-and-listen-on-all-interfaces>https://android.stackexchange.com/questions/52911/adb-start-server-and-listen-on-all-interfaces</a></p><p><a href=https://stackoverflow.com/questions/43923996/adb-root-is-not-working-on-emulator-cannot-run-as-root-in-production-builds/45668555#45668555>https://stackoverflow.com/questions/43923996/adb-root-is-not-working-on-emulator-cannot-run-as-root-in-production-builds/45668555#45668555</a></p><p><a href=https://developer.android.com/studio/command-line/adb>https://developer.android.com/studio/command-line/adb</a></p></div><div class=post-footer></div></article></main></body></html>